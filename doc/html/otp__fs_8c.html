<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>XDPP1100 Firmware: otp_fs.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_infineon.jpg"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">XDPP1100 Firmware
   </div>
   <div id="projectbrief">The firmware documentation for the XDPP1100 device family.</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('otp__fs_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">otp_fs.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>OTP file system layer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="fw__config_8h.html">fw_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="patch__run_8h.html">patch_run.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="environment_8h.html">environment.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="otp__fs_8h.html">otp_fs.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="otp__drv_8h.html">otp_drv.h</a>&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &quot;<a class="el" href="fw__bool_8h.html">fw_bool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="log__app_8h.html">log_app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="crc32_8h.html">crc32.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6b121612667c14a31c9d92602fb6046c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="environment_8h.html#a10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a6b121612667c14a31c9d92602fb6046c">otp_fs_command_invalidate_handler</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, uint32_t otp_offset, uint32_t otp_end)</td></tr>
<tr class="separator:a6b121612667c14a31c9d92602fb6046c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a971c162a5801bc660588b6031f5b0052"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fw__bool_8h.html#a9201c1178e191a87a38dd59c7fc36ff6">boolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a971c162a5801bc660588b6031f5b0052">otp_fs_ram_crc_hdr_is_valid</a> (const <a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *p_cmd_hdr, uint16_t sub_hdr_size)</td></tr>
<tr class="separator:a971c162a5801bc660588b6031f5b0052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6655e4c76756b067d81803c22bd5af2b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a6655e4c76756b067d81803c22bd5af2b">otp_fs_ram_crc_hdr_generate</a> (<a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *p_cmd_hdr, uint16_t sub_hdr_size)</td></tr>
<tr class="separator:a6655e4c76756b067d81803c22bd5af2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af81d6bfd66e805b211d0dc57e69e99a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fw__bool_8h.html#a9201c1178e191a87a38dd59c7fc36ff6">boolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#af81d6bfd66e805b211d0dc57e69e99a8">otp_fs_ram_compare_crc</a> (<a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *p_old_cmd_hdr, <a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *p_new_cmd_hdr)</td></tr>
<tr class="separator:af81d6bfd66e805b211d0dc57e69e99a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae0624e5de9f4813cb541668bf65f347"><td class="memItemLeft" align="right" valign="top"><a class="el" href="fw__bool_8h.html#a9201c1178e191a87a38dd59c7fc36ff6">boolean</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#aae0624e5de9f4813cb541668bf65f347">otp_fs_ram_crc_data_is_valid</a> (<a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *p_cmd_hdr, uint16_t sub_hdr_size)</td></tr>
<tr class="separator:aae0624e5de9f4813cb541668bf65f347"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abab624536f2149cca406201f7a938009"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#abab624536f2149cca406201f7a938009">otp_fs_ram_crc_data_generate</a> (<a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *p_cmd_hdr, uint16_t sub_hdr_size)</td></tr>
<tr class="separator:abab624536f2149cca406201f7a938009"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9d7dab7300683e021b2d669271cf35f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#ae9d7dab7300683e021b2d669271cf35f">otp_fs_hdr_load</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, uint32_t otp_offset, uint8_t **p_cmd_hdr, uint16_t sub_hdr_size)</td></tr>
<tr class="separator:ae9d7dab7300683e021b2d669271cf35f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d36f8e74e65351d06e24f30039b9491"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a9d36f8e74e65351d06e24f30039b9491">otp_fs_cmd_load</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, uint32_t otp_offset, <a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> **p_cmd_hdr, uint16_t cmd_size)</td></tr>
<tr class="separator:a9d36f8e74e65351d06e24f30039b9491"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e45587ba68d53ea17d4f8f4f64cc667"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a9e45587ba68d53ea17d4f8f4f64cc667">otp_fs_scan</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, const <a class="el" href="struct_otp___file___system___cmd___handler__t.html">Otp_File_System_Cmd_Handler_t</a> *handler, <a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> **cmd_hdr)</td></tr>
<tr class="separator:a9e45587ba68d53ea17d4f8f4f64cc667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9810d6bc47fa7577cd084eb02f43ab98"><td class="memItemLeft" align="right" valign="top"><a class="el" href="environment_8h.html#a10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a9810d6bc47fa7577cd084eb02f43ab98">_store_hdr</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, void *ptr, uint32_t num)</td></tr>
<tr class="separator:a9810d6bc47fa7577cd084eb02f43ab98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039f7d02cd144dd447282efa5f508998"><td class="memItemLeft" align="right" valign="top"><a class="el" href="environment_8h.html#a10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a039f7d02cd144dd447282efa5f508998">_store_data</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, const void *ptr, uint32_t num)</td></tr>
<tr class="separator:a039f7d02cd144dd447282efa5f508998"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aa4c5a31179cf88b986aafb81274cef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a8aa4c5a31179cf88b986aafb81274cef">otp_fs_data_store</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, uint8_t is_hdr, void *ptr, uint32_t num)</td></tr>
<tr class="separator:a8aa4c5a31179cf88b986aafb81274cef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68ff357e462f496677fa2f9787935c15"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a68ff357e462f496677fa2f9787935c15">otp_fs_data_store_status_get</a> (void)</td></tr>
<tr class="separator:a68ff357e462f496677fa2f9787935c15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0d986653a0efc3490dce0fc9a7a6ab2"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#af0d986653a0efc3490dce0fc9a7a6ab2">otp_fs_data_store_fault_get</a> (void)</td></tr>
<tr class="separator:af0d986653a0efc3490dce0fc9a7a6ab2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1def33edaeec3bc3a1032e4c1197535b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a1def33edaeec3bc3a1032e4c1197535b">otp_fs_data_store_fault_clear</a> (void)</td></tr>
<tr class="separator:a1def33edaeec3bc3a1032e4c1197535b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ee94cf7162298878fd57c0aa53fff2f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a0ee94cf7162298878fd57c0aa53fff2f">otp_fs_command_store</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, void *ptr, uint32_t num)</td></tr>
<tr class="separator:a0ee94cf7162298878fd57c0aa53fff2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8e8ac2fd9536734f3bdf787308e66ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#ac8e8ac2fd9536734f3bdf787308e66ab">otp_fs_command_header_update_program</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, <a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *p_cmd_hdr)</td></tr>
<tr class="separator:ac8e8ac2fd9536734f3bdf787308e66ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7013c8cd2e755081d2f9076643fb41"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a5a7013c8cd2e755081d2f9076643fb41">otp_fs_command_invalidate</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, <a class="el" href="otp__fs_8h.html#a822d0027045dbf83793fc39bf6b55b23">Otp_File_System_Cmd_Types_t</a> cmd_type, uint16_t option)</td></tr>
<tr class="separator:a5a7013c8cd2e755081d2f9076643fb41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0abba714ae5427024442e400207fe187"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#a0abba714ae5427024442e400207fe187">otp_fs_used_size</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition)</td></tr>
<tr class="separator:a0abba714ae5427024442e400207fe187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae62fd3e221f8fc9102177b7a04ebd787"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#ae62fd3e221f8fc9102177b7a04ebd787">otp_fs_max_xvalent</a> (<a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a> partition, <a class="el" href="otp__fs_8h.html#a822d0027045dbf83793fc39bf6b55b23">Otp_File_System_Cmd_Types_t</a> cmd)</td></tr>
<tr class="separator:ae62fd3e221f8fc9102177b7a04ebd787"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aaf79410eb550523f2f3b2c232589b8a6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="environment_8h.html#a10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> <a class="el" href="struct_otp___file___system___write___buffer__t.html">Otp_File_System_Write_Buffer_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otp__fs_8c.html#aaf79410eb550523f2f3b2c232589b8a6">Otp_File_System_Write_Buffer_s</a></td></tr>
<tr class="separator:aaf79410eb550523f2f3b2c232589b8a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>OTP file system layer. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a039f7d02cd144dd447282efa5f508998"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="environment_8h.html#a10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> void _store_data </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9810d6bc47fa7577cd084eb02f43ab98"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="environment_8h.html#a10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> void _store_hdr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9d36f8e74e65351d06e24f30039b9491"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_cmd_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>otp_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> **&#160;</td>
          <td class="paramname"><em>p_cmd_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>cmd_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads the OTP Files system command. It verifies the header checksum, which includes the sub-header fields.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>Parameter to indicate used OTP partition </td></tr>
    <tr><td class="paramname">otp_offset</td><td>OTP offset where to start reading the command </td></tr>
    <tr><td class="paramname">p_cmd_hdr</td><td>Pointer to the RAM location where to store the command </td></tr>
    <tr><td class="paramname">cmd_size</td><td>Overall command size. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac8e8ac2fd9536734f3bdf787308e66ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_command_header_update_program </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *&#160;</td>
          <td class="paramname"><em>p_cmd_hdr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Update the OTP file system header information (e.g. setting redundant length field and update the header and data checksum).</p>
<p>Afterwards it programs the command to the OTP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>Parameter to indicate used OTP partition </td></tr>
    <tr><td class="paramname">p_cmd_hdr</td><td>Pointer to OTP FS header, which is already filled out (e.g. command type, option field, length field). Header is followed by the command data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5a7013c8cd2e755081d2f9076643fb41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_command_invalidate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="otp__fs_8h.html#a822d0027045dbf83793fc39bf6b55b23">Otp_File_System_Cmd_Types_t</a>&#160;</td>
          <td class="paramname"><em>cmd_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>option</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function invalidates all OTP file system commands of the given type cmd_type.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>Parameter to indicate used OTP partition </td></tr>
    <tr><td class="paramname">cmd_type</td><td>File system command type * </td></tr>
    <tr><td class="paramname">option</td><td>File system option field</td></tr>
  </table>
  </dd>
</dl>
<dl class="Exceptions"><dt><b><a class="el" href="_exceptions.html#_Exceptions000025">Exception:</a></b></dt><dd><p class="startdd">OUT_OF_RESOURCE from otp_fs_scan and otp_fs_command_store. </p>
<p>ILLEGAL_PARAMETER from otp_fs_scan and otp_fs_command_store. </p>
<p class="enddd">TIMEOUT from otp_fs_scan and otp_fs_command_store. </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a6b121612667c14a31c9d92602fb6046c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="environment_8h.html#a10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> void otp_fs_command_invalidate_handler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>otp_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>otp_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This OTP2 scan callback function invalidates the current message.</p>
<dl class="Exceptions"><dt><b><a class="el" href="_exceptions.html#_Exceptions000020">Exception:</a></b></dt><dd><p class="startdd">ILLEGAL_PARAMETER from otp_hl_write. </p>
<p class="enddd">TIMEOUT from otp_hl_write. </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a0ee94cf7162298878fd57c0aa53fff2f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_command_store </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function programs the given file into the OTP. Only files with a valid command header should be stored in OTP. This function supports to store multiple files (consecutive placed in RAM).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>Parameter to indicate used OTP partition </td></tr>
    <tr><td class="paramname">ptr</td><td>RAM address location of the file(s) </td></tr>
    <tr><td class="paramname">num</td><td>Size of the file (number of Bytes)</td></tr>
  </table>
  </dd>
</dl>
<dl class="Exceptions"><dt><b><a class="el" href="_exceptions.html#_Exceptions000024">Exception:</a></b></dt><dd><p class="startdd">ILLEGAL_PARAMETER</p><ul>
<li>if the command's size and redundant size are inconsistent.</li>
<li>the command's size is not big enough to be a file system header.</li>
<li>the command's size exceeds the overall given size (defined through <code>num</code>).</li>
<li>from otp__read and otp__write. </li>
</ul>
<p>OUT_OF_RESOURCE if the file cannot be stored in the remaining free OTP space. </p>
<p>CORRUPT_MEMORY if header cmd or header checksum values are wrong. </p>
<p class="enddd">TIMEOUT from otp_read and otp_write. </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a8aa4c5a31179cf88b986aafb81274cef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_data_store </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>is_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>num</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function stores data into the OTP. The caller of this routine needs to make sure that the data</p><ul>
<li>is consistent (header and data crc are correct, size is correct)</li>
<li>is not exceeding the size of the respective partition This function supports to store multiple data files. A ping pong buffer of 1 kByte each is provided to store the data</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>Parameter to indicate used OTP partition<ul>
<li>0 for data partitions</li>
<li>1 - 16 for patch partitions </li>
</ul>
</td></tr>
    <tr><td class="paramname">is_hdr</td><td>Parameter to indicate if this is the first chunk of data including the first header. </td></tr>
    <tr><td class="paramname">ptr</td><td>RAM address location of the data </td></tr>
    <tr><td class="paramname">num</td><td>Size of the data (number of Bytes) maximum 1024</td></tr>
  </table>
  </dd>
</dl>
<dl class="Exceptions"><dt><b><a class="el" href="_exceptions.html#_Exceptions000023">Exception:</a></b></dt><dd><p class="startdd">ILLEGAL_PARAMETER</p><ul>
<li>if the command's size and redundant size are inconsistent.</li>
<li>the command's size is not big enough to be a file system header.</li>
<li>the command's size exceeds the overall given size (defined through <code>num</code>).</li>
<li>from otp_read and otp_write. </li>
</ul>
<p>OUT_OF_RESOURCE if the file cannot be stored in the remaining free OTP space. </p>
<p>CORRUPT_MEMORY if header cmd or header checksum values is wrong. </p>
<p class="enddd">TIMEOUT from otp_read and otp_write. </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a1def33edaeec3bc3a1032e4c1197535b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_data_store_fault_clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The otp_fs_data_store_fault_clear clears a write fault </p>

</div>
</div>
<a class="anchor" id="af0d986653a0efc3490dce0fc9a7a6ab2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t otp_fs_data_store_fault_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The otp_fs_data_store_fault_get retrieves a fault of the data_store command</p>
<dl class="section return"><dt>Returns</dt><dd>fault status of the otp_fs_store command<ul>
<li>0 ... no error</li>
<li>1 ... write fault occurred </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="a68ff357e462f496677fa2f9787935c15"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t otp_fs_data_store_status_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The otp_fs_data_store_status_get retrieves the status of the data_store command</p>
<dl class="section return"><dt>Returns</dt><dd>status of the data_store<ul>
<li>0 ... free</li>
<li>1 ... ping buffer is busy</li>
<li>2 ... pong buffer is busy</li>
<li>3 ... both are busy. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="ae9d7dab7300683e021b2d669271cf35f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_hdr_load </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>otp_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>p_cmd_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sub_hdr_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Loads the OTP Files system header and the command specific sub-header. It verifies the header checksum, which includes the sub-header fields.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>Parameter to indicate used OTP partition </td></tr>
    <tr><td class="paramname">otp_offset</td><td>offset where to start reading the header and sub-header </td></tr>
    <tr><td class="paramname">p_cmd_hdr</td><td>Pointer to the RAM location where to store the header and sub-header </td></tr>
    <tr><td class="paramname">sub_hdr_size</td><td>Sub-command specific sub-Header size. This parameter is needed in order to read the sub-header and perform the header checksum check.</td></tr>
  </table>
  </dd>
</dl>
<dl class="Exceptions"><dt><b><a class="el" href="_exceptions.html#_Exceptions000026">Exception:</a></b></dt><dd><p class="startdd">CORRUPT_MEMORY in case the header has a wrong checksum. </p>
<p>ILLEGAL_PARAMETER from otp_read. </p>
<p class="enddd">TIMEOUT from otp_read. </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="ae62fd3e221f8fc9102177b7a04ebd787"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t otp_fs_max_xvalent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="otp__fs_8h.html#a822d0027045dbf83793fc39bf6b55b23">Otp_File_System_Cmd_Types_t</a>&#160;</td>
          <td class="paramname"><em>cmd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the maximum available xvalent configuration </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>Parameter to indicate used OTP partition </td></tr>
    <tr><td class="paramname">cmd</td><td>indicates which command to check</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>maximum</code> available xvalent. </dd></dl>

</div>
</div>
<a class="anchor" id="af81d6bfd66e805b211d0dc57e69e99a8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fw__bool_8h.html#a9201c1178e191a87a38dd59c7fc36ff6">boolean</a> otp_fs_ram_compare_crc </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *&#160;</td>
          <td class="paramname"><em>p_old_cmd_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *&#160;</td>
          <td class="paramname"><em>p_new_cmd_hdr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Compares the crc of 2 different crc sources. This function is useful to check if the data to be stored in OTP are already there. In this case no action will be taken. The size of the OTP file system command should already be configured correctly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_old_cmd_hdr</td><td>Pointer to the command header in OTP. </td></tr>
    <tr><td class="paramname">p_new_cmd_hdr</td><td>Pointer to the command header in RAM.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>boolean_true</code> in case of they checksum is equal, otherwise <code>boolean_false</code>. </dd></dl>

</div>
</div>
<a class="anchor" id="abab624536f2149cca406201f7a938009"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_ram_crc_data_generate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *&#160;</td>
          <td class="paramname"><em>p_cmd_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sub_hdr_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates and updates CRC value of the OTP file system data blocks that are stored in RAM. The size of the OTP file system command should already be configured correctly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_cmd_hdr</td><td>Pointer to the command header. </td></tr>
    <tr><td class="paramname">sub_hdr_size</td><td>Size in Byte of the sub-command header which follows the command header. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aae0624e5de9f4813cb541668bf65f347"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fw__bool_8h.html#a9201c1178e191a87a38dd59c7fc36ff6">boolean</a> otp_fs_ram_crc_data_is_valid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *&#160;</td>
          <td class="paramname"><em>p_cmd_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sub_hdr_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates and checks the CRC value of the OTP file system data blocks that are stored in RAM. The size of the OTP file system command should already be configured correctly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_cmd_hdr</td><td>Pointer to the command header. </td></tr>
    <tr><td class="paramname">sub_hdr_size</td><td>Size in Byte of the sub-command header which follows the command header.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>boolean_true</code> in case of a valid checksum, otherwise <code>boolean_false</code>. </dd></dl>

</div>
</div>
<a class="anchor" id="a6655e4c76756b067d81803c22bd5af2b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_ram_crc_hdr_generate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *&#160;</td>
          <td class="paramname"><em>p_cmd_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sub_hdr_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates and updates the CRC value of the OTP file system header blocks that are stored in RAM. The size of the OTP file system command should already be configured correctly. This function also sets the CRC option bit in the command header.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_cmd_hdr</td><td>Pointer to the command header. </td></tr>
    <tr><td class="paramname">sub_hdr_size</td><td>Size in Byte of the sub-command header which follows the command header. This sub-command header is included in the checksum calculation. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a971c162a5801bc660588b6031f5b0052"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="fw__bool_8h.html#a9201c1178e191a87a38dd59c7fc36ff6">boolean</a> otp_fs_ram_crc_hdr_is_valid </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> *&#160;</td>
          <td class="paramname"><em>p_cmd_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>sub_hdr_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Calculates and checks the CRC value of the OTP file system header blocks that are stored in RAM. The size of the OTP file system command should already be configured correctly.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_cmd_hdr</td><td>Pointer to the command header. </td></tr>
    <tr><td class="paramname">sub_hdr_size</td><td>Size in Byte of the sub-command header which follows the command header. This sub-command header is included in the checksum calculation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>boolean_true</code> in case of a valid checksum, otherwise <code>boolean_false</code>. </dd></dl>

</div>
</div>
<a class="anchor" id="a9e45587ba68d53ea17d4f8f4f64cc667"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void otp_fs_scan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_otp___file___system___cmd___handler__t.html">Otp_File_System_Cmd_Handler_t</a> *&#160;</td>
          <td class="paramname"><em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_otp___file___system___cmd___hdr__t.html">Otp_File_System_Cmd_Hdr_t</a> **&#160;</td>
          <td class="paramname"><em>cmd_hdr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function scans the overall OTP file system for valid OTP file system commands. Commands which are listed in <a class="el" href="otp__fs_8h.html#a822d0027045dbf83793fc39bf6b55b23">Otp_File_System_Cmd_Types_t</a> are supported.</p>
<p>This routine is called with a list of callback handler for dedicated file system command types. Those handler callback routines are called in case such file system commands are found in OTP.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>Parameter to indicate used OTP partition </td></tr>
    <tr><td class="paramname">handler</td><td>Pointer to an file system command handler array. Each array entry maps a file system command to a dedicated callback handler. </td></tr>
    <tr><td class="paramname">cmd_header</td><td>return variable containing pointer to the address of the header in the OTP</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>Invalid file system command (e.g. <a class="el" href="otp__fs_8h.html#a822d0027045dbf83793fc39bf6b55b23ac51365e713721e0a6d00de85008d71c7">OTP_FS_CMD_INVALID</a>) are ignored.</dd></dl>
<dl class="Exceptions"><dt><b><a class="el" href="_exceptions.html#_Exceptions000022">Exception:</a></b></dt><dd><p class="startdd">CORRUPT_MEMORY if correct file system command exceeds the OTP size. </p>
<p>ILLEGAL_PARAMETER from otp_read. </p>
<p class="enddd">TIMEOUT from otp_read. </p>
</dd></dl>

</div>
</div>
<a class="anchor" id="a0abba714ae5427024442e400207fe187"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t otp_fs_used_size </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="fw__params_8h.html#a88394e3cbbb09d87cc7b7fe158ce88dd">Otp_Partition_Selector_t</a>&#160;</td>
          <td class="paramname"><em>partition</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Checks the used size in byte in the OTP </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">partition</td><td>Parameter to indicate used OTP partition</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><code>remaining</code> size in the given OTP partition. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aaf79410eb550523f2f3b2c232589b8a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="environment_8h.html#a10b2d890d871e1489bb02b7e70d9bdfb">STATIC</a> <a class="el" href="struct_otp___file___system___write___buffer__t.html">Otp_File_System_Write_Buffer_t</a> Otp_File_System_Write_Buffer_s</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_bdd9a5d540de89e9fe90efdfc6973a4f.html">common</a></li><li class="navelem"><a class="el" href="dir_d52f7f52f412a942de55fb463ecb0248.html">modules</a></li><li class="navelem"><a class="el" href="dir_6821d8ca02dc3513c5c5e75813a14a64.html">otp</a></li><li class="navelem"><a class="el" href="otp__fs_8c.html">otp_fs.c</a></li>
    <li class="footer">Generated on Wed Nov 8 2023 10:16:59 for XDPP1100 Firmware by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
